# 运动手环小程序框架使用说明

## 项目概述

本项目是一个基于微信小程序平台开发的运动手环应用，采用Material Design设计风格，提供用户登录/注册、数据统计、健康建议和个人信息管理等功能。项目已完成前端页面开发，可直接与后端API对接使用。

## 技术栈

- 微信小程序原生开发框架
- Material Design设计风格
- 图表可视化（需引入wxcharts库）
- RESTful API接口

## 目录结构

```
miniprogram3/
├── app.js                 // 应用程序入口文件
├── app.json               // 应用程序配置文件
├── app.wxss               // 应用程序全局样式
├── images/                // 图标和图片资源
├── pages/                 // 页面文件夹
│   ├── login/             // 登录/注册页面
│   ├── stats/             // 数据统计页面
│   ├── advice/            // 健康建议页面
│   └── profile/           // 个人中心页面
├── utils/                 // 工具函数
│   ├── api.js             // API请求封装
│   └── util.js            // 通用工具函数
└── 开发文档.md              // 开发文档
```

## 配置说明

### 后端API配置

在 `utils/api.js` 文件中，修改 `BASE_URL` 常量为你的后端服务器地址：

```javascript
// API基础URL
const BASE_URL = 'http://your-api-server.com'; // 修改为实际后端地址
```

### 页面配置

在 `app.json` 文件中，可以根据需要调整页面路径和TabBar配置：

```json
{
  "pages": [
    "pages/login/login",
    "pages/stats/stats",
    "pages/advice/advice",
    "pages/profile/profile"
  ],
  "window": {
    "navigationBarTextStyle": "white",
    "navigationBarTitleText": "运动手环",
    "navigationBarBackgroundColor": "#6200EE"
  },
  "tabBar": {
    "color": "#9E9E9E",
    "selectedColor": "#6200EE",
    "backgroundColor": "#FFFFFF",
    "borderStyle": "black",
    "list": [
      {
        "pagePath": "pages/stats/stats",
        "text": "数据统计",
        "iconPath": "images/stats.png",
        "selectedIconPath": "images/stats_selected.png"
      },
      {
        "pagePath": "pages/advice/advice",
        "text": "建议",
        "iconPath": "images/advice.png",
        "selectedIconPath": "images/advice_selected.png"
      },
      {
        "pagePath": "pages/profile/profile",
        "text": "我的",
        "iconPath": "images/profile.png",
        "selectedIconPath": "images/profile_selected.png"
      }
    ]
  }
}
```

## 功能模块说明

### 1. 用户认证模块

位于 `pages/login/login` 目录，提供登录和注册功能。

**主要功能**：
- 用户登录：验证用户名和密码
- 用户注册：收集用户基本信息并创建账户
- 表单验证：确保用户输入的数据有效
- 动态切换：在登录和注册表单之间平滑切换

**使用方法**：
- 修改 `login.js` 中的表单验证逻辑（如需）
- 自定义错误提示信息

### 2. 数据统计模块

位于 `pages/stats/stats` 目录，展示用户的运动和健康数据。

**主要功能**：
- 健康概览：显示用户关键健康指标
- 运动图表：可视化展示运动数据，支持时间范围切换
- 运动记录：列出最近的运动记录
- 身体指标：展示详细的身体健康指标

**使用方法**：
- 需要引入wxcharts库来支持图表功能
- 在 `stats.js` 中可以自定义图表样式和数据处理逻辑

### 3. 健康建议模块

位于 `pages/advice/advice` 目录，提供个性化的训练计划和营养建议。

**主要功能**：
- 训练计划：根据用户数据生成个性化训练计划
- 营养建议：提供饮食和营养摄入建议
- 动态切换：在训练计划和营养建议之间切换
- 刷新功能：支持手动刷新建议内容

**使用方法**：
- 在 `advice.js` 中可以自定义默认建议内容
- 配置DeepSeek API或其他AI服务来生成个性化建议

### 4. 个人中心模块

位于 `pages/profile/profile` 目录，管理用户个人信息和应用设置。

**主要功能**：
- 个人信息展示：显示用户基本信息和运动统计
- 信息编辑：支持修改个人信息
- 成就系统：展示用户获得的成就
- 应用设置：提供应用相关设置选项
- 退出登录：清除用户登录状态

**使用方法**：
- 在 `profile.js` 中可以自定义成就系统逻辑
- 添加更多设置选项

## 工具函数说明

### API工具 (utils/api.js)

封装了与后端API的交互逻辑，处理请求、认证和错误。

**主要功能**：
- 网络请求封装：统一处理GET、POST、PUT等请求
- 令牌管理：自动携带和刷新认证令牌
- 错误处理：统一处理API错误和异常

**使用方法**：
```javascript
const api = require('../../utils/api.js');

// 调用登录API
api.login(username, password)
  .then(res => {
    // 处理成功响应
  })
  .catch(err => {
    // 处理错误
  });
```

### 通用工具 (utils/util.js)

提供各种通用功能函数，简化开发过程。

**主要功能**：
- 时间格式化：处理日期和时间显示
- 数据格式化：格式化距离、步速、时长等数据
- 提示框封装：统一的消息提示和对话框样式

**使用方法**：
```javascript
const util = require('../../utils/util.js');

// 格式化日期
const formattedDate = util.formatTime(new Date());

// 显示提示
util.showToast('操作成功', 'success');
```

## 样式定制

### 主题颜色

在 `app.wxss` 文件中，可以修改主题颜色变量来自定义应用外观：

```css
page {
  --primary-color: #6200EE;        /* 主色 */
  --primary-dark-color: #3700B3;   /* 深色主题 */
  --primary-light-color: #BB86FC;  /* 浅色主题 */
  --secondary-color: #03DAC6;      /* 次要色 */
  --secondary-dark-color: #018786; /* 深色次要色 */
  /* 其他颜色变量... */
}
```

### 组件样式

框架提供了多种Material Design风格的组件样式，可以在各个页面中使用：

- 卡片 (.card)
- 按钮 (.btn, .btn-primary, .btn-secondary)
- 文本输入框 (.text-field)
- 加载动画 (.loading-container)

## 扩展开发

### 添加新页面

1. 在 `pages` 目录下创建新的页面目录
2. 创建页面所需的四个文件：.js、.json、.wxml、.wxss
3. 在 `app.json` 中的 `pages` 数组中添加新页面路径
4. 如需添加到TabBar，在 `tabBar.list` 数组中添加配置

### 添加新功能

1. 在相应页面的 .js 文件中添加新的方法
2. 在 .wxml 文件中添加对应的UI元素
3. 在 .wxss 文件中添加所需的样式
4. 如需与后端交互，在 `utils/api.js` 中添加新的API方法

## 注意事项

1. 需要添加图标文件到 `images` 目录
2. 需要引入wxcharts库来支持图表功能
3. 确保后端API与前端接口定义匹配
4. 首次使用时需要配置正确的后端服务器地址

## 常见问题

1. **登录失败**：检查 `api.js` 中的 BASE_URL 是否正确配置
2. **图表不显示**：确认是否正确引入wxcharts库
3. **样式异常**：检查是否正确引用了全局样式类
4. **数据不更新**：检查网络请求是否成功，可在控制台查看请求日志 