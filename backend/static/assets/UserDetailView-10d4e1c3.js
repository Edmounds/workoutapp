import{_ as ft,p as mt,j as pt,c as $,r as f,o as xt,a as u,b as m,d as h,e as s,h as t,g as e,f as D,F,i,t as o,u as gt,q as yt,s as bt}from"./index-13a3803f.js";import{i as kt,j as wt}from"./index-ff651f95.js";import{u as ht,i as Nt,a as Dt,b as Ct,c as zt,d as Vt,H as Rt}from"./index.esm.min-fe8a6091.js";const Ut={class:"user-detail-view pa-4"},At={class:"d-flex align-center mb-6"},Lt={class:"d-flex flex-column align-center mb-4"},St={class:"text-h4 white--text"},Tt={class:"text-h5"},Bt={class:"text-subtitle-1 text-grey"},$t={class:"d-flex flex-column align-center"},jt={class:"stat-circle primary lighten-4 mb-2"},It={class:"text-h5"},Ot={class:"d-flex flex-column align-center"},Mt={class:"stat-circle info lighten-4 mb-2"},Wt={class:"text-h5"},qt={class:"d-flex flex-column align-center"},Ft={class:"stat-circle success lighten-4 mb-2"},Gt={class:"text-h5"},Ht={key:0},Pt={class:"text-body-2"},Et={key:1,class:"text-center py-4"},Jt={class:"text-h6 primary--text"},Kt={class:"text-h6 error--text"},Qt={class:"text-h6 warning--text"},Xt={class:"text-h6 info--text"},Yt={class:"text-h6 success--text"},Zt={class:"text-h6 purple--text"},te={class:"text-body-1"},ee={class:"text-body-1"},le={class:"text-body-1"},se={class:"text-body-1"},ae={class:"text-body-1"},oe={class:"text-body-1"},ne={class:"text-body-1"},ie={__name:"UserDetailView",setup(re){ht([Nt,Dt,Ct,zt,Vt]);const G=mt(),H=pt(),j=$(()=>G.params.id),U=f(!0),n=f(null),A=f(!1),C=f(!1),w=f([]),L=f(1),P=f(10),I=f(0),S=f(""),E=$(()=>w.value.length<I.value),z=f(!1),p=f(null),J=[{title:"类型",key:"workout_type",width:"120px"},{title:"时间",key:"start_time",width:"180px"},{title:"时长(分钟)",key:"duration_minutes",width:"120px",align:"center"},{title:"距离(km)",key:"distance_km",width:"120px",align:"center"},{title:"平均配速",key:"avg_pace_formatted",width:"120px",align:"center"},{title:"平均心率",key:"avg_heart_rate",width:"120px",align:"center"},{title:"操作",key:"actions",sortable:!1,width:"80px",align:"center"}],K=$(()=>!n.value||!n.value.workout_summary.workout_types?{}:{tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"运动类型",type:"pie",radius:["45%","75%"],avoidLabelOverlap:!1,label:{show:!1},emphasis:{label:{show:!0,fontSize:"14",fontWeight:"bold"}},labelLine:{show:!1},data:n.value.workout_summary.workout_types.map((a,l)=>({value:a.count,name:a.workout_type||"未分类",itemStyle:{color:T(l)}}))}]});function Q(a){return a?a.substring(0,1).toUpperCase():"?"}function X(a){switch(a){case 1:return"男";case 2:return"女";default:return"未设置"}}function Y(a){switch(a){case 1:return"blue";case 2:return"pink";default:return"grey"}}function Z(a){switch(a){case"beginner":return"初学者";case"intermediate":return"中级";case"advanced":return"高级";default:return a}}function tt(a){switch(a){case"beginner":return"green";case"intermediate":return"orange";case"advanced":return"red";default:return"grey"}}function T(a){const l=["#3f51b5","#f44336","#4caf50","#ff9800","#9c27b0","#2196f3","#ff5722","#009688","#673ab7","#e91e63"];return l[a%l.length]}function et(a){const d=["跑步","恢复跑","长距离跑","间歇跑","节奏跑"].indexOf(a);return d>=0?T(d):"grey"}function lt(a){return a?new Date(a).toLocaleDateString("zh-CN"):""}function O(a){return a?new Date(a).toLocaleString("zh-CN"):""}function st(){H.back()}async function at(){U.value=!0;try{const a=await kt(j.value);a.code===200?n.value=a.data:console.error("获取用户详情失败:",a.message)}catch(a){console.error("加载用户详情错误:",a)}finally{U.value=!1}}async function M(a=!1){a?C.value=!0:(A.value=!0,L.value=1,w.value=[]);try{const l={page:L.value,size:P.value},d=await wt(j.value,l);d.code===200?(a?w.value=[...w.value,...d.data.records]:w.value=d.data.records,I.value=d.data.total):console.error("获取运动记录失败:",d.message)}catch(l){console.error("加载运动记录错误:",l)}finally{A.value=!1,C.value=!1}}function ot(){L.value+=1,M(!0)}function nt(a){p.value=a,z.value=!0}return xt(()=>{at(),M()}),(a,l)=>{const d=u("v-icon"),V=u("v-btn"),it=u("v-progress-circular"),r=u("v-col"),x=u("v-row"),N=u("v-card-title"),rt=u("v-avatar"),g=u("v-list-item-title"),R=u("v-chip"),y=u("v-list-item-subtitle"),b=u("v-list-item"),k=u("v-divider"),ut=u("v-list"),c=u("v-card-text"),v=u("v-card"),W=u("v-spacer"),dt=u("v-text-field"),_t=u("v-data-table"),q=u("v-card-actions"),ct=u("v-alert"),vt=u("v-dialog");return m(),h("div",Ut,[s("div",At,[t(V,{icon:"",class:"mr-2",onClick:st},{default:e(()=>[t(d,null,{default:e(()=>l[3]||(l[3]=[i("mdi-arrow-left")])),_:1,__:[3]})]),_:1}),l[4]||(l[4]=s("h1",{class:"text-h4"},"用户详情",-1))]),U.value?(m(),D(x,{key:0},{default:e(()=>[t(r,{cols:"12",class:"text-center"},{default:e(()=>[t(it,{indeterminate:"",color:"primary",size:"60"})]),_:1})]),_:1})):n.value?(m(),h(F,{key:1},[t(x,null,{default:e(()=>[t(r,{cols:"12",md:"4"},{default:e(()=>[t(v,{class:"elevation-3",rounded:"lg"},{default:e(()=>[t(N,{class:"text-h6"},{default:e(()=>l[5]||(l[5]=[i("基本信息")])),_:1,__:[5]}),t(c,null,{default:e(()=>[s("div",Lt,[t(rt,{size:"100",color:"primary",class:"mb-3"},{default:e(()=>[s("span",St,o(Q(n.value.user_info.username)),1)]),_:1}),s("div",Tt,o(n.value.user_info.username),1),s("div",Bt," ID: "+o(n.value.user_info.id),1)]),t(ut,{lines:"two"},{default:e(()=>[t(b,null,{prepend:e(()=>[t(d,{icon:"mdi-gender-male-female"})]),default:e(()=>[t(g,null,{default:e(()=>l[6]||(l[6]=[i("性别")])),_:1,__:[6]}),t(y,null,{default:e(()=>[t(R,{color:Y(n.value.user_info.gender),size:"small",class:"text-capitalize"},{default:e(()=>[i(o(X(n.value.user_info.gender)),1)]),_:1},8,["color"])]),_:1})]),_:1}),t(k),t(b,null,{prepend:e(()=>[t(d,{icon:"mdi-calendar-account"})]),default:e(()=>[t(g,null,{default:e(()=>l[7]||(l[7]=[i("年龄")])),_:1,__:[7]}),t(y,null,{default:e(()=>[i(o(n.value.user_info.age||"未设置"),1)]),_:1})]),_:1}),t(k),t(b,null,{prepend:e(()=>[t(d,{icon:"mdi-human-male-height"})]),default:e(()=>[t(g,null,{default:e(()=>l[8]||(l[8]=[i("身高")])),_:1,__:[8]}),t(y,null,{default:e(()=>[i(o(n.value.user_info.height||"未设置")+" cm",1)]),_:1})]),_:1}),t(k),t(b,null,{prepend:e(()=>[t(d,{icon:"mdi-weight"})]),default:e(()=>[t(g,null,{default:e(()=>l[9]||(l[9]=[i("体重")])),_:1,__:[9]}),t(y,null,{default:e(()=>[i(o(n.value.user_info.weight||"未设置")+" kg",1)]),_:1})]),_:1}),t(k),t(b,null,{prepend:e(()=>[t(d,{icon:"mdi-star"})]),default:e(()=>[t(g,null,{default:e(()=>l[10]||(l[10]=[i("级别")])),_:1,__:[10]}),t(y,null,{default:e(()=>[t(R,{color:tt(n.value.user_info.level),size:"small",class:"text-capitalize"},{default:e(()=>[i(o(Z(n.value.user_info.level)),1)]),_:1},8,["color"])]),_:1})]),_:1}),t(k),t(b,null,{prepend:e(()=>[t(d,{icon:"mdi-email"})]),default:e(()=>[t(g,null,{default:e(()=>l[11]||(l[11]=[i("邮箱")])),_:1,__:[11]}),t(y,null,{default:e(()=>[i(o(n.value.user_info.email||"未设置"),1)]),_:1})]),_:1}),t(k),t(b,null,{prepend:e(()=>[t(d,{icon:"mdi-calendar"})]),default:e(()=>[t(g,null,{default:e(()=>l[12]||(l[12]=[i("注册时间")])),_:1,__:[12]}),t(y,null,{default:e(()=>[i(o(lt(n.value.user_info.created_at)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(r,{cols:"12",md:"8"},{default:e(()=>[t(v,{class:"elevation-3 mb-4",rounded:"lg"},{default:e(()=>[t(N,{class:"text-h6"},{default:e(()=>l[13]||(l[13]=[i("运动数据汇总")])),_:1,__:[13]}),t(c,null,{default:e(()=>[t(x,null,{default:e(()=>[t(r,{cols:"12",sm:"4"},{default:e(()=>[s("div",$t,[s("div",jt,[s("span",It,o(n.value.workout_summary.total_count),1)]),l[14]||(l[14]=s("div",{class:"text-subtitle-1"},"总运动次数",-1))])]),_:1}),t(r,{cols:"12",sm:"4"},{default:e(()=>[s("div",Ot,[s("div",Mt,[s("span",Wt,o(n.value.workout_summary.total_hours),1)]),l[15]||(l[15]=s("div",{class:"text-subtitle-1"},"总运动时长 (小时)",-1))])]),_:1}),t(r,{cols:"12",sm:"4"},{default:e(()=>[s("div",qt,[s("div",Ft,[s("span",Gt,o(n.value.workout_summary.total_km),1)]),l[16]||(l[16]=s("div",{class:"text-subtitle-1"},"总运动距离 (km)",-1))])]),_:1})]),_:1}),t(k,{class:"my-4"}),n.value.workout_summary.workout_types&&n.value.workout_summary.workout_types.length>0?(m(),h("div",Ht,[l[17]||(l[17]=s("div",{class:"text-subtitle-1 mb-2"},"运动类型分布",-1)),t(x,null,{default:e(()=>[t(r,{cols:"12",md:"7"},{default:e(()=>[t(gt(Rt),{option:K.value,height:"200px"},null,8,["option"])]),_:1}),t(r,{cols:"12",md:"5"},{default:e(()=>[(m(!0),h(F,null,yt(n.value.workout_summary.workout_types,(_,B)=>(m(),h("div",{key:B,class:"d-flex align-center mb-2"},[t(R,{color:T(B),size:"small",class:"mr-2"},{default:e(()=>[i(o(_.workout_type||"未分类"),1)]),_:2},1032,["color"]),s("div",Pt,o(_.count)+" 次",1)]))),128))]),_:1})]),_:1})])):(m(),h("div",Et,l[18]||(l[18]=[s("p",{class:"text-body-1"},"暂无运动类型数据",-1)])))]),_:1})]),_:1}),t(v,{class:"elevation-3",rounded:"lg"},{default:e(()=>[t(N,{class:"text-h6"},{default:e(()=>l[19]||(l[19]=[i("最新体能数据")])),_:1,__:[19]}),Object.keys(n.value.latest_physical_stats).length>0?(m(),D(c,{key:0},{default:e(()=>[t(x,null,{default:e(()=>[t(r,{cols:"12",sm:"6",md:"4"},{default:e(()=>[t(v,{variant:"outlined",class:"stat-card"},{default:e(()=>[t(c,{class:"text-center"},{default:e(()=>[s("div",Jt,o(n.value.latest_physical_stats.health_index||"N/A"),1),l[20]||(l[20]=s("div",{class:"text-caption"},"健康指数",-1))]),_:1,__:[20]})]),_:1})]),_:1}),t(r,{cols:"12",sm:"6",md:"4"},{default:e(()=>[t(v,{variant:"outlined",class:"stat-card"},{default:e(()=>[t(c,{class:"text-center"},{default:e(()=>[s("div",Kt,o(n.value.latest_physical_stats.avg_heart_rate||"N/A"),1),l[21]||(l[21]=s("div",{class:"text-caption"},"平均心率 (bpm)",-1))]),_:1,__:[21]})]),_:1})]),_:1}),t(r,{cols:"12",sm:"6",md:"4"},{default:e(()=>[t(v,{variant:"outlined",class:"stat-card"},{default:e(()=>[t(c,{class:"text-center"},{default:e(()=>[s("div",Qt,o(n.value.latest_physical_stats.resting_heart_rate||"N/A"),1),l[22]||(l[22]=s("div",{class:"text-caption"},"静息心率 (bpm)",-1))]),_:1,__:[22]})]),_:1})]),_:1}),t(r,{cols:"12",sm:"6",md:"4"},{default:e(()=>[t(v,{variant:"outlined",class:"stat-card"},{default:e(()=>[t(c,{class:"text-center"},{default:e(()=>[s("div",Xt,o(n.value.latest_physical_stats.avg_blood_oxygen||"N/A"),1),l[23]||(l[23]=s("div",{class:"text-caption"},"平均血氧 (%)",-1))]),_:1,__:[23]})]),_:1})]),_:1}),t(r,{cols:"12",sm:"6",md:"4"},{default:e(()=>[t(v,{variant:"outlined",class:"stat-card"},{default:e(()=>[t(c,{class:"text-center"},{default:e(()=>[s("div",Yt,o(n.value.latest_physical_stats.sleep_quality||"N/A"),1),l[24]||(l[24]=s("div",{class:"text-caption"},"睡眠质量",-1))]),_:1,__:[24]})]),_:1})]),_:1}),t(r,{cols:"12",sm:"6",md:"4"},{default:e(()=>[t(v,{variant:"outlined",class:"stat-card"},{default:e(()=>[t(c,{class:"text-center"},{default:e(()=>[s("div",Zt,o(n.value.latest_physical_stats.aerobic_capacity||"N/A"),1),l[25]||(l[25]=s("div",{class:"text-caption"},"有氧能力",-1))]),_:1,__:[25]})]),_:1})]),_:1})]),_:1})]),_:1})):(m(),D(c,{key:1,class:"text-center py-4"},{default:e(()=>l[26]||(l[26]=[s("p",{class:"text-body-1"},"暂无体能数据",-1)])),_:1,__:[26]}))]),_:1})]),_:1})]),_:1}),t(x,{class:"mt-4"},{default:e(()=>[t(r,{cols:"12"},{default:e(()=>[t(v,{class:"elevation-3",rounded:"lg"},{default:e(()=>[t(N,{class:"text-h6 d-flex align-center"},{default:e(()=>[l[27]||(l[27]=s("span",null,"运动记录",-1)),t(W),t(dt,{modelValue:S.value,"onUpdate:modelValue":l[0]||(l[0]=_=>S.value=_),"prepend-inner-icon":"mdi-magnify",label:"搜索",density:"compact",variant:"outlined","hide-details":"",class:"search-field",style:{"max-width":"200px"}},null,8,["modelValue"])]),_:1,__:[27]}),t(c,null,{default:e(()=>[t(_t,{headers:J,items:w.value,loading:A.value,"items-per-page":5,search:S.value,class:"elevation-1"},{"item.workout_type":e(({item:_})=>[t(R,{size:"small",color:et(_.workout_type)},{default:e(()=>[i(o(_.workout_type||"未分类"),1)]),_:2},1032,["color"])]),"item.start_time":e(({item:_})=>[i(o(O(_.start_time)),1)]),"item.actions":e(({item:_})=>[t(V,{icon:"",variant:"text",color:"info",size:"small",onClick:B=>nt(_)},{default:e(()=>[t(d,null,{default:e(()=>l[28]||(l[28]=[i("mdi-information")])),_:1,__:[28]})]),_:2},1032,["onClick"])]),_:1},8,["items","loading","search"])]),_:1}),t(q,{class:"justify-center"},{default:e(()=>[t(V,{variant:"outlined",color:"primary",onClick:ot,loading:C.value,disabled:!E.value},{default:e(()=>[i(o(C.value?"加载中...":"加载更多"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})],64)):(m(),D(ct,{key:2,type:"error",class:"mt-4"},{default:e(()=>l[29]||(l[29]=[i(" 用户数据加载失败或用户不存在 ")])),_:1,__:[29]})),t(vt,{modelValue:z.value,"onUpdate:modelValue":l[2]||(l[2]=_=>z.value=_),"max-width":"600px"},{default:e(()=>[p.value?(m(),D(v,{key:0},{default:e(()=>[t(N,{class:"text-h5 pa-4"},{default:e(()=>l[30]||(l[30]=[i(" 运动记录详情 ")])),_:1,__:[30]}),t(c,null,{default:e(()=>[t(x,null,{default:e(()=>[t(r,{cols:"12",sm:"6"},{default:e(()=>[l[31]||(l[31]=s("div",{class:"text-subtitle-2 text-grey"},"运动类型",-1)),s("div",te,o(p.value.workout_type||"未分类"),1)]),_:1,__:[31]}),t(r,{cols:"12",sm:"6"},{default:e(()=>[l[32]||(l[32]=s("div",{class:"text-subtitle-2 text-grey"},"开始时间",-1)),s("div",ee,o(O(p.value.start_time)),1)]),_:1,__:[32]}),t(r,{cols:"12",sm:"6"},{default:e(()=>[l[33]||(l[33]=s("div",{class:"text-subtitle-2 text-grey"},"运动时长",-1)),s("div",le,o(p.value.duration_minutes)+" 分钟",1)]),_:1,__:[33]}),t(r,{cols:"12",sm:"6"},{default:e(()=>[l[34]||(l[34]=s("div",{class:"text-subtitle-2 text-grey"},"运动距离",-1)),s("div",se,o(p.value.distance_km)+" 公里",1)]),_:1,__:[34]}),t(r,{cols:"12",sm:"6"},{default:e(()=>[l[35]||(l[35]=s("div",{class:"text-subtitle-2 text-grey"},"平均配速",-1)),s("div",ae,o(p.value.avg_pace_formatted),1)]),_:1,__:[35]}),t(r,{cols:"12",sm:"6"},{default:e(()=>[l[36]||(l[36]=s("div",{class:"text-subtitle-2 text-grey"},"平均心率",-1)),s("div",oe,o(p.value.avg_heart_rate||"N/A")+" bpm",1)]),_:1,__:[36]}),t(r,{cols:"12",sm:"6"},{default:e(()=>[l[37]||(l[37]=s("div",{class:"text-subtitle-2 text-grey"},"消耗卡路里",-1)),s("div",ne,o(p.value.calories||"N/A")+" kcal",1)]),_:1,__:[37]})]),_:1})]),_:1}),t(q,{class:"pa-4"},{default:e(()=>[t(W),t(V,{color:"primary",variant:"text",onClick:l[1]||(l[1]=_=>z.value=!1)},{default:e(()=>l[38]||(l[38]=[i("关闭")])),_:1,__:[38]})]),_:1})]),_:1})):bt("",!0)]),_:1},8,["modelValue"])])}}},ce=ft(ie,[["__scopeId","data-v-d6698f80"]]);export{ce as default};
